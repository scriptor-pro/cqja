{% extends "layouts/base.njk" %}

{% block content %}
{% for note in collections.cqjaOrdered %}
  {% if note.url == page.url %}
    {% set currentIndex = loop.index0 %}
  {% endif %}
{% endfor %}

{% set number = currentIndex + 1 %}

<p class="cqja-number">CQJA #{{ number }}</p>

<h1>{{ title }}</h1>

<p><small>{{ date | dateFr }}</small></p>

{% if tags and tags.length > 0 %}
<ul class="note-tags" aria-label="Tags de la note">
  {% for tag in tags %}
    {% if tag != "note" %}
    <li><a href="/tags/{{ tag | tagSlug }}/">#{{ tag }}</a></li>
    {% endif %}
  {% endfor %}
</ul>
{% endif %}

{{ content | safe }}

<hr>

<nav class="cqja-nav" aria-label="Navigation entre les notes">
  {% set prev = collections.cqjaOrdered[currentIndex - 1] %}
  {% set next = collections.cqjaOrdered[currentIndex + 1] %}

  <div>
    {% if prev %}
      &larr; <a href="{{ prev.url }}">Précédent</a>
    {% endif %}
  </div>

  <div>
    {% if next %}
      <a href="{{ next.url }}">Suivant</a> &rarr;
    {% endif %}
  </div>
</nav>
{% endblock %}
